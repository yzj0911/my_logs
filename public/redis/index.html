<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Redis - YZJ çš„åšå®¢</title><meta name="Description" content="Hello æ¥äº†å°±åˆ«èµ°äº†ï¼Œè¿›æ¥ç•™ä¸‹æ–‡ç« "><meta property="og:title" content="Redis" />
<meta property="og:description" content="redis ç®€ä»‹ï¼šRedis ï¼Œå…¨ç§° Remote Dictionary Server ï¼Œæ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„é«˜æ€§èƒ½ Key-Value æ•°æ®åº“ã€‚ è„šæœ¬è‡ªåŠ¨å®‰è£…ä»»æ„ç‰ˆæœ¬ sh redis-install.sh 4.0.10 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/redis/" /><meta property="og:image" content="http://example.org/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-09T13:23:30+08:00" />
<meta property="article:modified_time" content="2022-05-09T13:23:30+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://example.org/logo.png"/>

<meta name="twitter:title" content="Redis"/>
<meta name="twitter:description" content="redis ç®€ä»‹ï¼šRedis ï¼Œå…¨ç§° Remote Dictionary Server ï¼Œæ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„é«˜æ€§èƒ½ Key-Value æ•°æ®åº“ã€‚ è„šæœ¬è‡ªåŠ¨å®‰è£…ä»»æ„ç‰ˆæœ¬ sh redis-install.sh 4.0.10 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/posts/images/avatar.webp"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://example.org/redis/" /><link rel="prev" href="http://example.org/%E4%B8%89%E8%89%B2%E6%A0%87%E8%AE%B0%E6%B3%95/" /><link rel="next" href="http://example.org/%E5%86%85%E5%AD%98%E9%80%83%E9%80%B8/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Redis",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/example.org\/redis\/"
        },"genre": "posts","wordcount":  2961 ,
        "url": "http:\/\/example.org\/redis\/","datePublished": "2022-05-09T13:23:30+08:00","dateModified": "2022-05-09T13:23:30+08:00","publisher": {
            "@type": "Organization",
            "name": "YZJ"},"author": {
                "@type": "Person",
                "name": "yzj"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="YZJ çš„åšå®¢"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/posts/images/avatar.webp"
        data-srcset="/posts/images/avatar.webp, /posts/images/avatar.webp 1.5x, /posts/images/avatar.webp 2x"
        data-sizes="auto"
        alt="/posts/images/avatar.webp"
        title="/posts/images/avatar.webp" />YZj çš„ä¸ªäººåšå®¢</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/" title="YZJ çš„åšå®¢"> æ–‡ç«  </a><a class="menu-item" href="/tags/" title="YZJ çš„åšå®¢"> æ ‡ç­¾ </a><a class="menu-item" href="/categories/" title="YZJ çš„åšå®¢"> åˆ†ç±» </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="è¯·è¾“å…¥æœç´¢æ–‡ç« " id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="YZJ çš„åšå®¢"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/posts/images/avatar.webp"
        data-srcset="/posts/images/avatar.webp, /posts/images/avatar.webp 1.5x, /posts/images/avatar.webp 2x"
        data-sizes="auto"
        alt="/posts/images/avatar.webp"
        title="/posts/images/avatar.webp" />YZj çš„ä¸ªäººåšå®¢</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="è¯·è¾“å…¥æœç´¢æ–‡ç« " id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/posts/" title="YZJ çš„åšå®¢">æ–‡ç« </a><a class="menu-item" href="/tags/" title="YZJ çš„åšå®¢">æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="YZJ çš„åšå®¢">åˆ†ç±»</a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Redis</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/yzj0911" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>yzj</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-05-09">2022-05-09</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 2961 å­—&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 6 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="true">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#redis-æœ‰å“ªäº›æ•°æ®ç»“æ„">Redis æœ‰å“ªäº›æ•°æ®ç»“æ„ï¼Ÿ</a></li>
    <li><a href="#redis-çš„çº¿ç¨‹æ¨¡å‹">Redis çš„çº¿ç¨‹æ¨¡å‹</a>
      <ul>
        <li><a href="#redis-single-thread-model">redis-single-thread-model</a></li>
      </ul>
    </li>
    <li><a href="#redis-å•çº¿ç¨‹æ¨¡å‹ä¹Ÿèƒ½æ•ˆç‡è¿™ä¹ˆé«˜">Redis å•çº¿ç¨‹æ¨¡å‹ä¹Ÿèƒ½æ•ˆç‡è¿™ä¹ˆé«˜ï¼Ÿ</a></li>
    <li><a href="#redis-æ˜¯å•çº¿ç¨‹çš„å¦‚ä½•æé«˜å¤šæ ¸-cpu-çš„åˆ©ç”¨ç‡">Redis æ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚ä½•æé«˜å¤šæ ¸ CPU çš„åˆ©ç”¨ç‡ï¼Ÿ</a></li>
    <li><a href="#redis-æœ‰å‡ ç§æŒä¹…åŒ–æ–¹å¼">Redis æœ‰å‡ ç§æŒä¹…åŒ–æ–¹å¼ï¼Ÿ</a></li>
    <li><a href="#æœ‰å“ªå‡ ç§æ•°æ®æ·˜æ±°ç­–ç•¥">æœ‰å“ªå‡ ç§æ•°æ®â€œæ·˜æ±°â€ç­–ç•¥ï¼Ÿ</a></li>
    <li><a href="#ç†è§£å›æ”¶è¿›ç¨‹å¦‚ä½•å·¥ä½œæ˜¯éå¸¸é‡è¦çš„">ç†è§£å›æ”¶è¿›ç¨‹å¦‚ä½•å·¥ä½œæ˜¯éå¸¸é‡è¦çš„ï¼š</a></li>
    <li><a href="#å¦‚æœå¤§é‡çš„-key-è¿‡æœŸæ—¶é—´è®¾ç½®çš„è¿‡äºé›†ä¸­åˆ°è¿‡æœŸçš„é‚£ä¸ªæ—¶é—´ç‚¹rediså¯èƒ½ä¼šå‡ºç°çŸ­æš‚çš„å¡é¡¿ç°è±¡">å¦‚æœå¤§é‡çš„ key è¿‡æœŸæ—¶é—´è®¾ç½®çš„è¿‡äºé›†ä¸­ï¼Œåˆ°è¿‡æœŸçš„é‚£ä¸ªæ—¶é—´ç‚¹ï¼ŒRediså¯èƒ½ä¼šå‡ºç°çŸ­æš‚çš„å¡é¡¿ç°è±¡ã€‚</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="redis">redis</h1>
<p>ç®€ä»‹ï¼šRedis ï¼Œå…¨ç§° Remote Dictionary Server ï¼Œæ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„é«˜æ€§èƒ½ Key-Value æ•°æ®åº“ã€‚</p>
<p>è„šæœ¬è‡ªåŠ¨å®‰è£…ä»»æ„ç‰ˆæœ¬ sh redis-install.sh 4.0.10</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#! /usr/bin/bash
</span><span class="cp"></span><span class="c1">##redisä»»ä½•ç‰ˆæœ¬å…¨ç¨‹è‡ªåŠ¨åŒ–æºç ç¼–è¯‘å®‰è£…</span>
<span class="c1">##ç”¨æ³•ï¼šsh redis-install.sh 4.0.10 ï¼ˆåé¢è·Ÿçš„æ˜¯ä½ éœ€è¦çš„ç‰ˆæœ¬å·ï¼Œéœ€è¦ä»€ä¹ˆç‰ˆæœ¬å°±å†™ä»€ä¹ˆç‰ˆæœ¬ï¼‰ï¼Œæˆ‘è¿™é‡Œå®‰è£…çš„4.0.10</span>
<span class="nv">version</span><span class="o">=</span><span class="nv">$1</span>
usage<span class="o">(){</span>
<span class="nb">echo</span> <span class="s2">&#34;usage: </span><span class="nv">$0</span><span class="s2"> version&#34;</span>
<span class="o">}</span>

<span class="k">if</span> <span class="o">[</span> <span class="nv">$#</span> -ne <span class="m">1</span> <span class="o">]</span>
<span class="k">then</span>
usage
<span class="nb">exit</span> -1
<span class="k">fi</span>

<span class="c1">#Rediså®‰è£…åŒ…ä¸‹è½½</span>
<span class="nb">cd</span> /usr/local/src
<span class="k">if</span> <span class="o">[</span> ! -f redis-<span class="si">${</span><span class="nv">version</span><span class="si">}</span>.tar.gz <span class="o">]</span>
<span class="k">then</span>
curl -o /usr/local/src/redis-<span class="si">${</span><span class="nv">version</span><span class="si">}</span>.tar.gz http://download.redis.io/releases/redis-<span class="si">${</span><span class="nv">version</span><span class="si">}</span>.tar.gz
<span class="k">fi</span>

<span class="c1">#Redisä¾èµ–åŒ…å®‰è£…</span>
yum clean all
yum makecache fast
yum -y install gcc gcc-c++ tcl

<span class="c1">#ç¼–è¯‘Redisæ‰€éœ€è¦çš„gcc</span>
yum -y install centos-release-scl
yum -y install devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils
<span class="nb">source</span> /opt/rh/devtoolset-9/enable
<span class="nb">echo</span> <span class="s2">&#34;source /opt/rh/devtoolset-9/enable&#34;</span> &gt;&gt;/etc/profile
gcc --version

<span class="c1">##å†…ç³»ç»Ÿå‚æ•°æ ¸ä¼˜åŒ–</span>
cat &gt;&gt; /etc/rc.d/rc.local &lt;&lt; <span class="s2">&#34;EOF&#34;</span>

<span class="c1">##å…³é—­Linuxçš„THPï¼ˆå†…å­˜ç®¡ç†ç³»ç»Ÿï¼‰é€šè¿‡ä½¿ç”¨æ›´å¤§çš„å†…å­˜é¡µé¢ï¼Œæ¥å‡å°‘å…·æœ‰å¤§é‡å†…å­˜çš„è®¡ç®—æœºä¸Šçš„TLBçš„å¼€é”€</span>
<span class="k">if</span> <span class="o">[</span> -f /sys/kernel/mm/transparent_hugepage/enabled <span class="o">]</span>
<span class="k">then</span>
<span class="nb">echo</span> never &gt; /sys/kernel/mm/transparent_hugepage/enabled
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> -f /sys/kernel/mm/transparent_hugepage/defrag <span class="o">]</span>
<span class="k">then</span>
<span class="nb">echo</span> never &gt; /sys/kernel/mm/transparent_hugepage/defrag
<span class="k">fi</span>
EOF
chmod u+x /etc/rc.d/rc.local

<span class="k">if</span> <span class="o">[</span> -f /sys/kernel/mm/transparent_hugepage/enabled <span class="o">]</span>
<span class="k">then</span>
<span class="nb">echo</span> never &gt; /sys/kernel/mm/transparent_hugepage/enabled
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> -f /sys/kernel/mm/transparent_hugepage/defrag <span class="o">]</span>
<span class="k">then</span>
<span class="nb">echo</span> never &gt; /sys/kernel/mm/transparent_hugepage/defrag
<span class="k">fi</span>

cat &gt;&gt; /etc/sysctl.conf &lt;&lt; <span class="s2">&#34;EOF&#34;</span>

<span class="c1">#Linuxç³»ç»Ÿå†…æ ¸å‚æ•°ä¼˜åŒ–</span>
net.core.somaxconn <span class="o">=</span> <span class="m">2048</span>
net.ipv4.tcp_max_syn_backlog <span class="o">=</span> <span class="m">2048</span>
vm.overcommit_memory <span class="o">=</span> <span class="m">1</span>
EOF
sysctl -p

cat &gt; /etc/security/limits.conf &lt;&lt; <span class="s2">&#34;EOF&#34;</span>
root soft nofile <span class="m">65535</span>
root hard nofile <span class="m">65535</span>
* soft nofile <span class="m">65535</span>
* hard nofile <span class="m">65535</span>
EOF

<span class="c1">#Redisç¼–è¯‘å®‰è£…</span>
<span class="nb">cd</span> /usr/local/src
tar -zxvf redis-<span class="si">${</span><span class="nv">version</span><span class="si">}</span>.tar.gz
<span class="nb">cd</span> /usr/local/src/redis-<span class="si">${</span><span class="nv">version</span><span class="si">}</span>
make
make <span class="nv">PREFIX</span><span class="o">=</span>/usr/local/redis install

<span class="c1">#RedisåŸºç¡€é…ç½®</span>
mkdir -p /usr/local/redis/<span class="o">{</span>etc,logs,data<span class="o">}</span>
egrep -v <span class="s2">&#34;^</span>$<span class="s2">|^#&#34;</span> /usr/local/src/redis-<span class="si">${</span><span class="nv">version</span><span class="si">}</span>/redis.conf &gt; /usr/local/redis/etc/redis.conf
<span class="c1">#sed -i &#34;s/bind 127.0.0.1/bind 0.0.0.0/g&#34; /usr/local/redis/etc/redis.conf</span>
sed -i <span class="s2">&#34;s/protected-mode yes/protected-mode no/g&#34;</span> /usr/local/redis/etc/redis.conf
sed -i <span class="s2">&#34;s/daemonize no/daemonize yes/g&#34;</span> /usr/local/redis/etc/redis.conf
sed -i <span class="s2">&#34;s/pidfile \/var\/run\/redis_6379.pid/pidfile \/usr\/local\/redis\/redis.pid/g&#34;</span> /usr/local/redis/etc/redis.conf
sed -i <span class="s2">&#34;s/dir \.\//dir \/usr\/local\/redis\/data/g&#34;</span> /usr/local/redis/etc/redis.conf
sed -i <span class="s2">&#34;s/logfile \&#34;\&#34;/logfile \&#34;\/usr\/local\/redis\/logs\/redis.log\&#34;/g&#34;</span> /usr/local/redis/etc/redis.conf
sed -i <span class="s2">&#34;s/dbfilename dump.rdb/dbfilename dump.rdb/g&#34;</span> /usr/local/redis/etc/redis.conf
sed -i <span class="s2">&#34;s/appendfilename \&#34;appendonly.aof\&#34;/appendfilename \&#34;appendonly.aof\&#34;/g&#34;</span> /usr/local/redis/etc/redis.conf

<span class="c1">#PATHé…ç½®</span>
<span class="nb">echo</span> <span class="s2">&#34;export PATH=</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:/usr/local/redis/bin&#34;</span> &gt;&gt;/etc/profile
<span class="nb">source</span> /etc/profile
<span class="c1">#å¯åŠ¨redisæœåŠ¡</span>
/usr/local/redis/bin/redis-server /usr/local/redis/etc/redis.conf
<span class="c1">#æŸ¥çœ‹redisç›‘å¬ç«¯å£</span>
netstat -tanp<span class="p">|</span>grep redis
</code></pre></td></tr></table>
</div>
</div><h2 id="redis-æœ‰å“ªäº›æ•°æ®ç»“æ„">Redis æœ‰å“ªäº›æ•°æ®ç»“æ„ï¼Ÿ</h2>
<p>å¦‚æœä½ æ˜¯ <code>Redis</code> æ™®é€šç©å®¶ï¼Œå¯èƒ½ä½ çš„å›ç­”æ˜¯å¦‚ä¸‹äº”ç§æ•°æ®ç»“æ„ï¼š</p>
<ul>
<li>å­—ç¬¦ä¸² String</li>
<li>å­—å…¸ Hash</li>
<li>åˆ—è¡¨ List</li>
<li>é›†åˆ Set</li>
<li>æœ‰åºé›†åˆ SortedSet</li>
</ul>
<p>å¦‚æœä½ æ˜¯ Redis ä¸­çº§ç©å®¶ï¼Œè¿˜éœ€è¦åŠ ä¸Šä¸‹é¢å‡ ç§æ•°æ®ç»“æ„ï¼š</p>
<ul>
<li>HyperLogLog</li>
<li>Geo</li>
<li>Bitmap</li>
</ul>
<p>å¦‚æœä½ æ˜¯ Redis é«˜ç«¯ç©å®¶ï¼Œä½ å¯èƒ½ç©è¿‡ Redis Module ï¼Œå¯ä»¥å†åŠ ä¸Šä¸‹é¢å‡ ç§æ•°æ®ç»“æ„ï¼š</p>
<ul>
<li>BloomFilter</li>
<li>RedisSearch</li>
<li>Redis-ML</li>
<li>JSON</li>
</ul>
<p>å¦å¤–ï¼Œåœ¨ Redis 5.0 å¢åŠ äº† Stream åŠŸèƒ½ï¼Œä¸€ä¸ªæ–°çš„å¼ºå¤§çš„æ”¯æŒå¤šæ’­çš„å¯æŒä¹…åŒ–çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæä¾›ç±»ä¼¼ Kafka çš„åŠŸèƒ½ã€‚</p>
<h2 id="redis-çš„çº¿ç¨‹æ¨¡å‹">Redis çš„çº¿ç¨‹æ¨¡å‹</h2>
<p>redis å†…éƒ¨ä½¿ç”¨æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨ file event handlerï¼Œè¿™ä¸ªæ–‡ä»¶äº‹ä»¶å¤„ç†å™¨æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥ Redis æ‰å«åšå•çº¿ç¨‹çš„æ¨¡å‹ã€‚å®ƒé‡‡ç”¨ IO å¤šè·¯å¤ç”¨æœºåˆ¶åŒæ—¶ç›‘å¬å¤šä¸ª Socketï¼Œæ ¹æ® Socket ä¸Šçš„äº‹ä»¶æ¥é€‰æ‹©å¯¹åº”çš„äº‹ä»¶å¤„ç†å™¨è¿›è¡Œå¤„ç†ã€‚</p>
<p>æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨çš„ç»“æ„åŒ…å« 4 ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>å¤šä¸ª Socket ã€‚</li>
<li>IO å¤šè·¯å¤ç”¨ç¨‹åºã€‚</li>
<li>æ–‡ä»¶äº‹ä»¶åˆ†æ´¾å™¨ã€‚</li>
<li>äº‹ä»¶å¤„ç†å™¨ï¼ˆè¿æ¥åº”ç­”å¤„ç†å™¨ã€å‘½ä»¤è¯·æ±‚å¤„ç†å™¨ã€å‘½ä»¤å›å¤å¤„ç†å™¨ï¼‰ã€‚</li>
</ul>
<p>å¤šä¸ª Socket å¯èƒ½ä¼šå¹¶å‘äº§ç”Ÿä¸åŒçš„æ“ä½œï¼Œæ¯ä¸ªæ“ä½œå¯¹åº”ä¸åŒçš„æ–‡ä»¶äº‹ä»¶ï¼Œä½†æ˜¯ IO å¤šè·¯å¤ç”¨ç¨‹åºä¼šç›‘å¬å¤šä¸ª socketï¼Œä¼šå°† socket äº§ç”Ÿçš„äº‹ä»¶æ”¾å…¥é˜Ÿåˆ—ä¸­æ’é˜Ÿï¼Œäº‹ä»¶åˆ†æ´¾å™¨æ¯æ¬¡ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªäº‹ä»¶ï¼ŒæŠŠè¯¥äº‹ä»¶äº¤ç»™å¯¹åº”çš„äº‹ä»¶å¤„ç†å™¨è¿›è¡Œå¤„ç†ã€‚</p>
<p>æ¥çœ‹å®¢æˆ·ç«¯ä¸ redis çš„ä¸€æ¬¡é€šä¿¡è¿‡ç¨‹ï¼š
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://raw.githubusercontent.com/yzj0911/my_logs/main/content/images/20200509Redis1.png"
        data-srcset="https://raw.githubusercontent.com/yzj0911/my_logs/main/content/images/20200509Redis1.png, https://raw.githubusercontent.com/yzj0911/my_logs/main/content/images/20200509Redis1.png 1.5x, https://raw.githubusercontent.com/yzj0911/my_logs/main/content/images/20200509Redis1.png 2x"
        data-sizes="auto"
        alt="https://raw.githubusercontent.com/yzj0911/my_logs/main/content/images/20200509Redis1.png"
        title="https://raw.githubusercontent.com/yzj0911/my_logs/main/content/images/20200509Redis1.png" /></p>
<h3 id="redis-single-thread-model">redis-single-thread-model</h3>
<p>å®¢æˆ·ç«¯ <code>Socket01</code> å‘ <code>Redis</code> çš„ <code>Server Socket</code> è¯·æ±‚å»ºç«‹è¿æ¥ï¼Œæ­¤æ—¶ <code>Server Socket</code> ä¼šäº§ç”Ÿä¸€ä¸ª <code>AE_READABLE</code> äº‹ä»¶ï¼ŒIO å¤šè·¯å¤ç”¨ç¨‹åºç›‘å¬åˆ° <code>server socket</code> äº§ç”Ÿçš„äº‹ä»¶åï¼Œå°†è¯¥äº‹ä»¶å‹å…¥é˜Ÿåˆ—ä¸­ã€‚æ–‡ä»¶äº‹ä»¶åˆ†æ´¾å™¨ä»é˜Ÿåˆ—ä¸­è·å–è¯¥äº‹ä»¶ï¼Œäº¤ç»™è¿æ¥åº”ç­”å¤„ç†å™¨ã€‚è¿æ¥åº”ç­”å¤„ç†å™¨ä¼šåˆ›å»ºä¸€ä¸ªèƒ½ä¸å®¢æˆ·ç«¯é€šä¿¡çš„ <code>Socket01</code>ï¼Œå¹¶å°†è¯¥ <code>Socket01</code> çš„ <code>AE_READABLE </code>äº‹ä»¶ä¸å‘½ä»¤è¯·æ±‚å¤„ç†å™¨å…³è”ã€‚</p>
<p>å‡è®¾æ­¤æ—¶å®¢æˆ·ç«¯å‘é€äº†ä¸€ä¸ª <code>set key value</code> è¯·æ±‚ï¼Œæ­¤æ—¶ <code>Redis</code> ä¸­çš„ <code>Socket01</code> ä¼šäº§ç”Ÿ AE_READABLE äº‹ä»¶ï¼ŒIO å¤šè·¯å¤ç”¨ç¨‹åºå°†äº‹ä»¶å‹å…¥é˜Ÿåˆ—ï¼Œæ­¤æ—¶äº‹ä»¶åˆ†æ´¾å™¨ä»é˜Ÿåˆ—ä¸­è·å–åˆ°è¯¥äº‹ä»¶ï¼Œç”±äºå‰é¢ <code>Socket01</code> çš„ AE_READABLE äº‹ä»¶å·²ç»ä¸å‘½ä»¤è¯·æ±‚å¤„ç†å™¨å…³è”ï¼Œå› æ­¤äº‹ä»¶åˆ†æ´¾å™¨å°†äº‹ä»¶äº¤ç»™å‘½ä»¤è¯·æ±‚å¤„ç†å™¨æ¥å¤„ç†ã€‚å‘½ä»¤è¯·æ±‚å¤„ç†å™¨è¯»å– <code>Scket01</code> çš„ <code>set key value</code> å¹¶åœ¨è‡ªå·±å†…å­˜ä¸­å®Œæˆ set key value çš„è®¾ç½®ã€‚æ“ä½œå®Œæˆåï¼Œå®ƒä¼šå°† <code>Scket01</code> çš„ <code>AE_WRITABLE</code> äº‹ä»¶ä¸ä»¤å›å¤å¤„ç†å™¨å…³è”ã€‚</p>
<p>å¦‚æœæ­¤æ—¶å®¢æˆ·ç«¯å‡†å¤‡å¥½æ¥æ”¶è¿”å›ç»“æœäº†ï¼Œé‚£ä¹ˆ <code>Redis</code> ä¸­çš„ <code>Socket01</code> ä¼šäº§ç”Ÿä¸€ä¸ª AE_WRITABLE äº‹ä»¶ï¼ŒåŒæ ·å‹å…¥é˜Ÿåˆ—ä¸­ï¼Œäº‹ä»¶åˆ†æ´¾å™¨æ‰¾åˆ°ç›¸å…³è”çš„å‘½ä»¤å›å¤å¤„ç†å™¨ï¼Œç”±å‘½ä»¤å›å¤å¤„ç†å™¨å¯¹ <code>socket01</code> è¾“å…¥æœ¬æ¬¡æ“ä½œçš„ä¸€ä¸ªç»“æœï¼Œæ¯”å¦‚ okï¼Œä¹‹åè§£é™¤ <code>Socket01</code> çš„ AE_WRITABLE äº‹ä»¶ä¸å‘½ä»¤å›å¤å¤„ç†å™¨çš„å…³è”ã€‚
è¿™æ ·ä¾¿å®Œæˆäº†ä¸€æ¬¡é€šä¿¡ã€‚</p>
<hr>
<h2 id="redis-å•çº¿ç¨‹æ¨¡å‹ä¹Ÿèƒ½æ•ˆç‡è¿™ä¹ˆé«˜">Redis å•çº¿ç¨‹æ¨¡å‹ä¹Ÿèƒ½æ•ˆç‡è¿™ä¹ˆé«˜ï¼Ÿ</h2>
<ol>
<li>
<p>C è¯­è¨€å®ç°ã€‚</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒC è¯­è¨€çš„æ‰§è¡Œé€Ÿåº¦éå¸¸å¿«ã€‚</p>
</li>
<li>
<p>çº¯å†…å­˜æ“ä½œã€‚</p>
<p>Redis ä¸ºäº†è¾¾åˆ°æœ€å¿«çš„è¯»å†™é€Ÿåº¦ï¼Œå°†æ•°æ®éƒ½è¯»åˆ°å†…å­˜ä¸­ï¼Œå¹¶é€šè¿‡å¼‚æ­¥çš„æ–¹å¼å°†æ•°æ®å†™å…¥ç£ç›˜ã€‚æ‰€ä»¥ Redis å…·æœ‰å¿«é€Ÿå’Œæ•°æ®æŒä¹…åŒ–çš„ç‰¹å¾ã€‚</p>
<p>å¦‚æœä¸å°†æ•°æ®æ”¾åœ¨å†…å­˜ä¸­ï¼Œç£ç›˜ I/O é€Ÿåº¦ä¸ºä¸¥é‡å½±å“ Redis çš„æ€§èƒ½ã€‚</p>
</li>
<li>
<p>åŸºäºéé˜»å¡çš„ IO å¤šè·¯å¤ç”¨æœºåˆ¶ã€‚</p>
</li>
<li>
<p>å•çº¿ç¨‹ï¼Œé¿å…äº†å¤šçº¿ç¨‹çš„é¢‘ç¹ä¸Šä¸‹æ–‡åˆ‡æ¢é—®é¢˜ã€‚</p>
<p>Redis åˆ©ç”¨é˜Ÿåˆ—æŠ€æœ¯ï¼Œå°†å¹¶å‘è®¿é—®å˜ä¸ºä¸²è¡Œè®¿é—®ï¼Œæ¶ˆé™¤äº†ä¼ ç»Ÿæ•°æ®åº“ä¸²è¡Œæ§åˆ¶çš„å¼€é”€ã€‚</p>
<p>å®é™…ä¸Šï¼ŒRedis 4.0 å¼€å§‹ï¼Œä¹Ÿå¼€å§‹æœ‰äº†ä¸€äº›å¼‚æ­¥çº¿ç¨‹ï¼Œç”¨äºå¤„ç†ä¸€äº›è€—æ—¶æ“ä½œã€‚ä¾‹å¦‚è¯´ï¼Œå¼‚æ­¥çº¿ç¨‹ï¼Œå®ç°æƒ°æ€§åˆ é™¤ï¼ˆè§£å†³å¤§ KEY åˆ é™¤ï¼Œé˜»å¡ä¸»çº¿ç¨‹ï¼‰å’Œå¼‚æ­¥ AOF ï¼ˆè§£å†³ç£ç›˜ IO ç´§å¼ æ—¶ï¼Œfsync æ‰§è¡Œä¸€æ¬¡å¾ˆæ…¢ï¼‰ç­‰ç­‰ã€‚</p>
</li>
<li>
<p>ä¸°å¯Œçš„æ•°æ®ç»“æ„ã€‚</p>
<p>Redis å…¨ç¨‹ä½¿ç”¨ hash ç»“æ„ï¼Œè¯»å–é€Ÿåº¦å¿«ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œå¯¹æ•°æ®å­˜å‚¨è¿›è¡Œäº†ä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼Œå‹ç¼©è¡¨ï¼Œå¯¹çŸ­æ•°æ®è¿›è¡Œå‹ç¼©å­˜å‚¨ï¼›å†å†å¦‚ï¼Œè·³è¡¨ï¼Œä½¿ç”¨æœ‰åºçš„æ•°æ®ç»“æ„åŠ å¿«è¯»å–çš„é€Ÿåº¦ã€‚
ä¹Ÿå› ä¸º Redis æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥å¯ä»¥å®ç°ä¸°å¯Œçš„æ•°æ®ç»“æ„ï¼Œæ— éœ€è€ƒè™‘å¹¶å‘çš„é—®é¢˜ã€‚</p>
</li>
</ol>
<hr>
<h2 id="redis-æ˜¯å•çº¿ç¨‹çš„å¦‚ä½•æé«˜å¤šæ ¸-cpu-çš„åˆ©ç”¨ç‡">Redis æ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚ä½•æé«˜å¤šæ ¸ CPU çš„åˆ©ç”¨ç‡ï¼Ÿ</h2>
<p>å¯ä»¥åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨éƒ¨ç½²å¤šä¸ª Redis çš„å®ä¾‹ï¼Œå¹¶æŠŠä»–ä»¬å½“ä½œä¸åŒçš„æœåŠ¡å™¨æ¥ä½¿ç”¨ï¼Œåœ¨æŸäº›æ—¶å€™ï¼Œæ— è®ºå¦‚ä½•ä¸€ä¸ªæœåŠ¡å™¨æ˜¯ä¸å¤Ÿçš„ï¼Œ æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨å¤šä¸ª CPU ï¼Œä½ å¯ä»¥è€ƒè™‘ä¸€ä¸‹åˆ†åŒºã€‚</p>
<hr>
<h2 id="redis-æœ‰å‡ ç§æŒä¹…åŒ–æ–¹å¼">Redis æœ‰å‡ ç§æŒä¹…åŒ–æ–¹å¼ï¼Ÿ</h2>
<p>Redis æä¾›äº†ä¸¤ç§æ–¹å¼ï¼Œå®ç°æ•°æ®çš„æŒä¹…åŒ–åˆ°ç¡¬ç›˜ã€‚</p>
<ul>
<li>1ã€ã€å…¨é‡ã€‘<code>RDB</code> æŒä¹…åŒ–ï¼Œæ˜¯æŒ‡åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥ç£ç›˜ã€‚å®é™…æ“ä½œè¿‡ç¨‹æ˜¯ï¼Œfork ä¸€ä¸ªå­è¿›ç¨‹ï¼Œå…ˆå°†æ•°æ®é›†å†™å…¥ä¸´æ—¶æ–‡ä»¶ï¼Œå†™å…¥æˆåŠŸåï¼Œå†æ›¿æ¢ä¹‹å‰çš„æ–‡ä»¶ï¼Œç”¨äºŒè¿›åˆ¶å‹ç¼©å­˜å‚¨ã€‚</li>
<li>2ã€ã€å¢é‡ã€‘<code>AOF</code>æŒä¹…åŒ–ï¼Œä»¥æ—¥å¿—çš„å½¢å¼è®°å½•æœåŠ¡å™¨æ‰€å¤„ç†çš„æ¯ä¸€ä¸ªå†™ã€åˆ é™¤æ“ä½œï¼ŒæŸ¥è¯¢æ“ä½œä¸ä¼šè®°å½•ï¼Œä»¥æ–‡æœ¬çš„æ–¹å¼è®°å½•ï¼Œå¯ä»¥æ‰“å¼€æ–‡ä»¶çœ‹åˆ°è¯¦ç»†çš„æ“ä½œè®°å½•ã€‚</li>
</ul>
<hr>
<h2 id="æœ‰å“ªå‡ ç§æ•°æ®æ·˜æ±°ç­–ç•¥">æœ‰å“ªå‡ ç§æ•°æ®â€œæ·˜æ±°â€ç­–ç•¥ï¼Ÿ</h2>
<p>Redis å†…å­˜æ•°æ®é›†å¤§å°ä¸Šå‡åˆ°ä¸€å®šå¤§å°çš„æ—¶å€™ï¼Œå°±ä¼šè¿›è¡Œæ•°æ®æ·˜æ±°ç­–ç•¥ã€‚</p>
<p>Redis æä¾›äº† 6 ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š</p>
<ul>
<li>volatile-lru</li>
<li>volatile-ttl</li>
<li>volatile-random</li>
<li>allkeys-lru</li>
<li>allkeys-random</li>
<li>ã€é»˜è®¤ç­–ç•¥ã€‘no-enviction</li>
</ul>
<p>å…·ä½“çš„æ¯ç§æ•°æ®æ·˜æ±°ç­–ç•¥çš„å®šä¹‰ï¼Œå’Œå¦‚ä½•é€‰æ‹©è®¨è®ºç­–ç•¥ï¼Œå¯è§ ã€ŠRediså®æˆ˜ï¼ˆäºŒï¼‰ å†…å­˜æ·˜æ±°æœºåˆ¶ã€‹ ã€‚</p>
<p>åœ¨ Redis 4.0 åï¼ŒåŸºäº LFUï¼ˆLeast Frequently Usedï¼‰æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼Œå¢åŠ äº† 2 ç§æ·˜æ±°ç­–ç•¥ï¼š</p>
<ul>
<li>volatile-lfu</li>
<li>allkeys-lfu</li>
</ul>
<p>ğŸ¦… Redis LRU ç®—æ³•</p>
<p>å¦å¤–ï¼ŒRedis çš„ LRU ç®—æ³•ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªä¸¥æ ¼çš„ LRU å®ç°ã€‚è¿™æ„å‘³ç€ Redis ä¸èƒ½é€‰æ‹©æœ€ä½³å€™é€‰é”®æ¥å›æ”¶ï¼Œä¹Ÿå°±æ˜¯æœ€ä¹…æœªè¢«è®¿é—®çš„é‚£äº›é”®ã€‚ç›¸åï¼ŒRedis ä¼šå°è¯•æ‰§è¡Œä¸€ä¸ªè¿‘ä¼¼çš„ LRU ç®—æ³•ï¼Œé€šè¿‡é‡‡æ ·ä¸€å°éƒ¨åˆ†é”®ï¼Œç„¶ååœ¨é‡‡æ ·é”®ä¸­å›æ”¶æœ€é€‚åˆ(æ‹¥æœ‰æœ€ä¹…æœªè¢«è®¿é—®æ—¶é—´)çš„é‚£ä¸ªã€‚</p>
<p>Redis æ²¡æœ‰ä½¿ç”¨çœŸæ­£å®ç°ä¸¥æ ¼çš„ LRU ç®—æ˜¯çš„åŸå› æ˜¯ï¼Œå› ä¸ºæ¶ˆè€—æ›´å¤šçš„å†…å­˜ã€‚ç„¶è€Œå¯¹äºä½¿ç”¨ Redis çš„åº”ç”¨æ¥è¯´ï¼Œä½¿ç”¨è¿‘ä¼¼çš„ LRU ç®—æ³•ï¼Œäº‹å®ä¸Šæ˜¯ç­‰ä»·çš„ã€‚</p>
<hr>
<h2 id="ç†è§£å›æ”¶è¿›ç¨‹å¦‚ä½•å·¥ä½œæ˜¯éå¸¸é‡è¦çš„">ç†è§£å›æ”¶è¿›ç¨‹å¦‚ä½•å·¥ä½œæ˜¯éå¸¸é‡è¦çš„ï¼š</h2>
<ul>
<li>ä¸€ä¸ªå®¢æˆ·ç«¯è¿è¡Œäº†æ–°çš„å†™å‘½ä»¤ï¼Œæ·»åŠ äº†æ–°çš„æ•°æ®ã€‚</li>
<li>Redis æ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå¦‚æœå¤§äº maxmemory çš„é™åˆ¶, åˆ™æ ¹æ®è®¾å®šå¥½çš„ç­–ç•¥è¿›è¡Œå›æ”¶ã€‚</li>
<li>Redis æ‰§è¡Œæ–°å‘½ä»¤ã€‚</li>
</ul>
<p>æ‰€ä»¥æˆ‘ä»¬ä¸æ–­åœ°ç©¿è¶Šå†…å­˜é™åˆ¶çš„è¾¹ç•Œï¼Œé€šè¿‡ä¸æ–­è¾¾åˆ°è¾¹ç•Œç„¶åä¸æ–­åœ°å›æ”¶å›åˆ°è¾¹ç•Œä»¥ä¸‹ï¼ˆè·Œå®•èµ·ä¼ï¼‰ã€‚</p>
<hr>
<h2 id="å¦‚æœå¤§é‡çš„-key-è¿‡æœŸæ—¶é—´è®¾ç½®çš„è¿‡äºé›†ä¸­åˆ°è¿‡æœŸçš„é‚£ä¸ªæ—¶é—´ç‚¹rediså¯èƒ½ä¼šå‡ºç°çŸ­æš‚çš„å¡é¡¿ç°è±¡">å¦‚æœå¤§é‡çš„ key è¿‡æœŸæ—¶é—´è®¾ç½®çš„è¿‡äºé›†ä¸­ï¼Œåˆ°è¿‡æœŸçš„é‚£ä¸ªæ—¶é—´ç‚¹ï¼ŒRediså¯èƒ½ä¼šå‡ºç°çŸ­æš‚çš„å¡é¡¿ç°è±¡ã€‚</h2>
<ol>
<li>
<p>ä¸€èˆ¬éœ€è¦åœ¨æ—¶é—´ä¸ŠåŠ ä¸€ä¸ªéšæœºå€¼ï¼Œä½¿å¾—è¿‡æœŸæ—¶é—´åˆ†æ•£ä¸€äº›ã€‚</p>
</li>
<li>
<p>æ˜¯è°ƒå¤§ hz å‚æ•°ï¼Œæ¯æ¬¡è¿‡æœŸçš„ key æ›´å¤šï¼Œä»è€Œæœ€ç»ˆè¾¾åˆ°é¿å…ä¸€æ¬¡è¿‡æœŸè¿‡å¤šã€‚</p>
<p>è¿™ä¸ªå®šæœŸçš„é¢‘ç‡ï¼Œç”±é…ç½®æ–‡ä»¶ä¸­çš„ hz å‚æ•°å†³å®šï¼Œä»£è¡¨äº†ä¸€ç§’é’Ÿå†…ï¼Œåå°ä»»åŠ¡æœŸæœ›è¢«è°ƒç”¨çš„æ¬¡æ•°ã€‚Redis 3.0.0 ä¸­çš„é»˜è®¤å€¼æ˜¯ 10 ï¼Œä»£è¡¨æ¯ç§’é’Ÿè°ƒç”¨ 10 æ¬¡åå°ä»»åŠ¡ã€‚</p>
<p>hz è°ƒå¤§å°†ä¼šæé«˜ Redis ä¸»åŠ¨æ·˜æ±°çš„é¢‘ç‡ï¼Œå¦‚æœä½ çš„ Redis å­˜å‚¨ä¸­åŒ…å«å¾ˆå¤šå†·æ•°æ®å ç”¨å†…å­˜è¿‡å¤§çš„è¯ï¼Œå¯ä»¥è€ƒè™‘å°†è¿™ä¸ªå€¼è°ƒå¤§ï¼Œä½† Redis ä½œè€…å»ºè®®è¿™ä¸ªå€¼ä¸è¦è¶…è¿‡ 100 ã€‚æˆ‘ä»¬å®é™…çº¿ä¸Šå°†è¿™ä¸ªå€¼è°ƒå¤§åˆ° 100 ï¼Œè§‚å¯Ÿåˆ° CPU ä¼šå¢åŠ  2% å·¦å³ï¼Œä½†å¯¹å†·æ•°æ®çš„å†…å­˜é‡Šæ”¾é€Ÿåº¦ç¡®å®æœ‰æ˜æ˜¾çš„æé«˜ï¼ˆé€šè¿‡è§‚å¯Ÿ keyspace ä¸ªæ•°å’Œ used_memory å¤§å°ï¼‰ã€‚</p>
</li>
</ol>
<hr>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2022-05-09</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/redis/index.md" target="_blank">é˜…è¯»åŸå§‹æ–‡æ¡£</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="http://example.org/redis/" data-title="Redis" data-via="xxxx"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="http://example.org/redis/"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° WhatsApp" data-sharer="whatsapp" data-url="http://example.org/redis/" data-title="Redis" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="http://example.org/redis/" data-title="Redis"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="http://example.org/redis/" data-title="Redis"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Myspace" data-sharer="myspace" data-url="http://example.org/redis/" data-title="Redis" data-description=""><i data-svg-src="/lib/simple-icons/icons/myspace.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Blogger" data-sharer="blogger" data-url="http://example.org/redis/" data-title="Redis" data-description=""><i class="fab fa-blogger fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Evernote" data-sharer="evernote" data-url="http://example.org/redis/" data-title="Redis"><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/%E4%B8%89%E8%89%B2%E6%A0%87%E8%AE%B0%E6%B3%95/" class="prev" rel="prev" title="ä¸‰è‰²æ ‡è®°æ³•"><i class="fas fa-angle-left fa-fw"></i>ä¸‰è‰²æ ‡è®°æ³•</a>
            <a href="/%E5%86%85%E5%AD%98%E9%80%83%E9%80%B8/" class="next" rel="next" title="å†…å­˜é€ƒé€¸">å†…å­˜é€ƒé€¸<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.90.0-DEV">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/yzj0911" target="_blank">yzj</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":10},"comment":{},"cookieconsent":{"content":{"dismiss":"åŒæ„","link":"äº†è§£æ›´å¤š","message":"æœ¬ç½‘ç«™ä½¿ç”¨ Cookies æ¥æ”¹å–„æ‚¨çš„æµè§ˆä½“éªŒ."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
